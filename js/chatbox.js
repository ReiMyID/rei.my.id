const ws=new WebSocket("ws://192.168.1.39:8080"),chatBox=document.getElementById("chat-box"),messageForm=document.getElementById("message-form"),messageInput=document.getElementById("message-input"),formatTime=e=>e.toLocaleString("en-US",{year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric",hour12:!0}),visitTime=new Date,formattedVisitTime=formatTime(visitTime),displayLocalMessage=e=>{let s=document.createElement("div");s.classList.add("message-container"),s.innerHTML=`<span class="nickname-local">&lt;LOCAL&gt;&nbsp;</span> <span class="message">${e}</span><span class="timestamp">${formattedVisitTime}</span>`,chatBox.appendChild(s),chatBox.scrollTop=chatBox.scrollHeight};ws.onmessage=e=>{let s=e.data.split(": "),a=s[0],n=s[1],t=s[2];n||(n="&nbsp;"),t||(t=`${formattedVisitTime}`);let i;i=a.startsWith("Anonymous")&&/\d+$/.test(a)?"nickname-anonymous":/^Your nickname has been changed to .+$/.test(a)||"LOCAL"===a?"nickname-local":"nickname-user";let m=document.createElement("div");m.classList.add("message-container"),m.innerHTML=`<span class="${i}">&lt;${a}&gt;&nbsp;</span><span class="message">${n}</span><span class="timestamp">${t}</span>`,chatBox.appendChild(m),chatBox.scrollTop=chatBox.scrollHeight},ws.onerror=()=>{displayLocalMessage("Server connection error")},ws.terminate=()=>{displayLocalMessage("Disconnected from server")},messageForm.onsubmit=e=>{e.preventDefault(),ws.send(messageInput.value),messageInput.value=""};